Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\n    <string name=\"app_name\">知旅</string>\n    <!--zlt本地测试ip-->\n    <string name=\"internet_ip\" translatable=\"false\">192.168.2.167</string>\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/strings.xml	(revision 904bf60d15391eac2070fff312623e41aac4460b)
+++ app/src/main/res/values/strings.xml	(date 1614433546634)
@@ -2,4 +2,6 @@
     <string name="app_name">知旅</string>
     <!--zlt本地测试ip-->
     <string name="internet_ip" translatable="false">192.168.2.167</string>
+    <!--zmr本地测试ip-->
+<!--    <string name="internet_ip" translatable="false">192.168.1.107</string>-->
 </resources>
\ No newline at end of file
Index: app/src/main/java/cn/edu/hebtu/software/zhilvdemo/Activity/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package cn.edu.hebtu.software.zhilvdemo.Activity;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport cn.edu.hebtu.software.zhilvdemo.Data.User;\nimport cn.edu.hebtu.software.zhilvdemo.R;\nimport cn.edu.hebtu.software.zhilvdemo.Setting.MyApplication;\nimport cn.edu.hebtu.software.zhilvdemo.Util.DateUtil;\nimport cn.edu.hebtu.software.zhilvdemo.Util.DetermineConnServer;\nimport cn.edu.hebtu.software.zhilvdemo.Util.JudgeStrUtil;\nimport cn.edu.hebtu.software.zhilvdemo.Util.SharedUtil;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.os.Message;\nimport android.text.method.HideReturnsTransformationMethod;\nimport android.text.method.PasswordTransformationMethod;\nimport android.text.method.TransformationMethod;\nimport android.util.Log;\nimport android.view.KeyEvent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.google.gson.Gson;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.net.URLConnection;\n\npublic class LoginActivity extends AppCompatActivity {\n    private EditText inputPhoneOrEmail;\n    private EditText inputPassword;\n    private ImageView ivEye;\n    private Button btnLoginIn;\n    private TextView fgpwd;\n    private TextView signUp;\n\n    private boolean isPhone;\n    private boolean isEmail;\n    private boolean isHideFirst = true;//输入框密码是否是隐藏的，默认为true\n\n    private MyApplication data;\n    @SuppressLint(\"HandlerLeak\")\n    private final Handler handler = new Handler(){\n        @Override\n        public void handleMessage(@NonNull Message msg) {\n            switch (msg.what){\n                case 1001:\n                    Toast.makeText(LoginActivity.this, (CharSequence) msg.obj, Toast.LENGTH_LONG).show();\n                    break;\n                case 1002:\n                    data.setUser((User)msg.obj);\n                    //将登陆信息保存在本地\n                    setUserMsgLocal(data.getUser());\n                    finish();\n                    break;\n            }\n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n        getViews();\n        registListener();\n        data = (MyApplication)getApplication();\n    }\n\n    private void getViews(){\n        inputPhoneOrEmail = findViewById(R.id.edt_input_phoneOrEmail);\n        inputPassword = findViewById(R.id.edt_input_password);\n        ivEye = findViewById(R.id.iv_eye);\n        btnLoginIn = findViewById(R.id.btn_login_in);\n        fgpwd = findViewById(R.id.tv_fgpwd);\n        signUp = findViewById(R.id.tv_sign_up);\n    }\n\n    private void registListener(){\n        CustomOnClickListener listener = new CustomOnClickListener();\n        ivEye.setOnClickListener(listener);\n        btnLoginIn.setOnClickListener(listener);\n        fgpwd.setOnClickListener(listener);\n        signUp.setOnClickListener(listener);\n    }\n\n    class CustomOnClickListener implements View.OnClickListener{\n        @Override\n        public void onClick(View v) {\n            Intent intent = null;\n            switch (v.getId()){\n                case R.id.iv_eye:\n                    if (isHideFirst == true) {\n                        ivEye.setImageResource(R.mipmap.yanjing);\n                        //明文\n                        HideReturnsTransformationMethod method1 = HideReturnsTransformationMethod.getInstance();\n                        inputPassword.setTransformationMethod(method1);\n                        isHideFirst = false;\n                    } else {\n                        ivEye.setImageResource(R.mipmap.biyanjing);\n                        //密文\n                        TransformationMethod method = PasswordTransformationMethod.getInstance();\n                        inputPassword.setTransformationMethod(method);\n                        isHideFirst = true;\n                    }\n                    break;\n                case R.id.btn_login_in:\n                    isPhone = JudgeStrUtil.isPhone(inputPhoneOrEmail.getText().toString().trim());\n                    isEmail = JudgeStrUtil.isEmail(inputPhoneOrEmail.getText().toString().trim());\n                    String pwd = inputPassword.getText().toString().trim();\n                    login(pwd);\n                    break;\n                case R.id.tv_fgpwd:\n                    intent = new Intent(LoginActivity.this, ForgetPwdActivity.class);\n                    startActivity(intent);\n                    finish();\n                    break;\n                case R.id.tv_sign_up:\n                    intent = new Intent(LoginActivity.this, RegistActivity.class);\n                    startActivity(intent);\n                    finish();\n                    break;\n            }\n        }\n    }\n\n    private void setUserMsgLocal(User user){\n        SharedUtil.putInt(\"userMsg\",this,\"userId\",user.getUserId());\n        SharedUtil.putString(\"userMsg\",this,\"phone\",user.getPhone());\n        SharedUtil.putString(\"userMsg\",this,\"email\",user.getEmail());\n        SharedUtil.putString(\"userMsg\",this,\"password\",user.getPassword());\n        SharedUtil.putString(\"userMsg\",this,\"userHead\",user.getUserHead());\n        SharedUtil.putString(\"userMsg\",this,\"userName\",user.getUserName());\n        SharedUtil.putString(\"userMsg\",this,\"sex\",user.getSex());\n        SharedUtil.putString(\"userMsg\",this,\"birth\", DateUtil.getDateStr(user.getBirth()));\n        SharedUtil.putString(\"userMsg\",this,\"signature\",user.getSignature());\n    }\n\n    private void login(String pwd) {\n        new Thread(){\n            public void run(){\n                try {\n                    Message msg = Message.obtain();\n                    String urlstr = null;\n                    if(isPhone && !isEmail){\n                        urlstr = \"http://\" + data.getIp() + \":8080/ZhiLvProject/user/login?phone=\" + inputPhoneOrEmail.getText().toString() + \"&password=\" + pwd;\n                    }else if(!isPhone && isEmail){\n                        urlstr = \"http://\" + data.getIp() + \":8080/ZhiLvProject/user/login?email=\" + inputPhoneOrEmail.getText().toString() + \"&password=\" + pwd;\n                    }\n                    if(DetermineConnServer.isConnByHttp(LoginActivity.this)){\n                        User threadUser = new User();\n                        URL url = new URL(urlstr);\n                        URLConnection conn = url.openConnection();\n                        InputStream in = conn.getInputStream();\n                        BufferedReader reader = new BufferedReader(new InputStreamReader(in, \"utf-8\"));\n                        String str = reader.readLine();\n                        if(\"NoUser\".equals(str)){\n                            msg.what = 1001;\n                            msg.obj = \"用户名或密码错误\";\n                        }else {\n                            Gson gson = new Gson();\n                            Log.e(\"user=\", str);\n                            threadUser = gson.fromJson(str, User.class);\n                            msg.what = 1002;\n                            msg.obj = threadUser;\n                        }\n                    }else {\n                        msg.what = 1001;\n                        msg.obj = \"未连接到服务器\";\n                    }\n                    handler.sendMessage(msg);\n                } catch (MalformedURLException e) {\n                    e.printStackTrace();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }.start();\n    }\n\n\n\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\n        if(keyCode == KeyEvent.KEYCODE_BACK ){\n            finish();\n        }\n        return true;\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/cn/edu/hebtu/software/zhilvdemo/Activity/LoginActivity.java	(revision 904bf60d15391eac2070fff312623e41aac4460b)
+++ app/src/main/java/cn/edu/hebtu/software/zhilvdemo/Activity/LoginActivity.java	(date 1614848215064)
@@ -118,7 +118,11 @@
                     isPhone = JudgeStrUtil.isPhone(inputPhoneOrEmail.getText().toString().trim());
                     isEmail = JudgeStrUtil.isEmail(inputPhoneOrEmail.getText().toString().trim());
                     String pwd = inputPassword.getText().toString().trim();
-                    login(pwd);
+                    if(!isPhone && !isEmail ){
+                        Toast.makeText(getApplicationContext(), "账号格式有误", Toast.LENGTH_SHORT).show();
+                    }else {
+                        login(pwd);
+                    }
                     break;
                 case R.id.tv_fgpwd:
                     intent = new Intent(LoginActivity.this, ForgetPwdActivity.class);
